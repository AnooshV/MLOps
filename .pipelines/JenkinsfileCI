pipeline {
    agent {
        docker { 
	        image 'nabiakar/mslearn-jenkins:latest' 
	    }
    }
    stages {
        stage('Custom') {
            steps {

                script {
                    print('hello world')
                }
            }
        }
        stage('Linting'){
            steps{
                script{
                    sh "flake8 src/model"
                
                }
            }
        }
        
    
        
     }
     post {
        always {
            cleanWs(cleanWhenNotBuilt: false,
                    deleteDirs: true,
                    disableDeferredWipeout: true,
                    notFailBuild: true,
                    patterns: [[pattern: '.gitignore', type: 'INCLUDE'],
                                [pattern: '.propsfile', type: 'EXCLUDE']])
        }
    }
}